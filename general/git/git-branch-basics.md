### **Gitブランチ機能の概要**

本資料は、バージョン管理システムGitにおける「ブランチ」機能について解説するものです。ブランチの概念と基本的な操作方法を理解し、安全で効率的な開発フローを習得することを目的とします。

### **1. Gitブランチとは**

#### **1.1. なぜブランチが必要か？ ― 開発における課題**

ソフトウェア開発では、多くの場合、一つのプロジェクトに対して複数の作業が同時に進行します。例えば、以下のような状況が考えられます。

* **完成しているバージョン**は安定して動作させ続けたい。  
* **新しい機能の追加**には、数日または数週間の時間が必要になる。  
* **緊急で修正すべきバグ**が発見された。

もし、開発の履歴が一本道しかなかった場合、これらの作業が混ざり合ってしまいます。新しい機能を追加している途中の未完成なコードが、緊急のバグ修正を妨げたり、プロジェクト全体を不安定にしたりする可能性があります。全員が同じ場所で作業をすると、互いの変更が衝突し、管理が非常に困難になります。

この課題を解決するのが「ブランチ」という考え方です。

#### **1.2. ブランチの概念モデル**

ブランチとは、開発の履歴（コミットの連なり）を**分岐**させ、主軸となる履歴に影響を与えることなく独立した作業を可能にするための仕組みです。これは、木の幹から枝が分かれて伸びていく様子に似ています。

共同で一つの文書を作成する状況で考えてみましょう。

* **原本（mainブランチ）**: プロジェクトの公式な完成版です。この内容は、常に正確で、いつでも公開できる状態を保ちます。

ここで、二つの異なるタスクが発生したとします。

1. **新しい章を追加する（大規模な作業）**  
2. **既存の章の誤字を修正する（小規模で緊急の作業）**

ブランチを使えば、原本の特定の時点から、それぞれの作業用に「複製」を作成できます。

* 「新しい章を追加する」ためのブランチを作成し、そこでじっくりと作業を進める。  
* 並行して、「誤字を修正する」ための別のブランチを素早く作成し、修正作業を行う。

重要なのは、これらの作業が互いに干渉しないことです。誤字修正は、新しい章の追加作業の完了を待つ必要なく、完了次第すぐに原本に統合（**マージ**）できます。新しい章の追加も、完成した時点で安全に原本へ統合できます。

このように、ブランチは特定の目的専用の、独立した「作業スペース」を提供するのです。

* **mainブランチ**: プロジェクトの主軸となる履歴。通常、安定して動作する完成版のバージョンを管理します。  
* **作業用のブランチ**: 新しいページの追加、間違いの修正、新しいアイデアの試作など、特定の作業のために作成される一時的な履歴。

作業用のブランチを利用することで、mainブランチの状態を常に安定させながら、安全に新しい開発タスクを進めることができます。作業が完了した際には、その変更内容をmainブランチへ統合（マージ）します。

#### **1.3. ブランチ利用の重要性**

ブランチの活用には以下の利点があります。

* **開発の安全性**: mainブランチを直接変更しないため、作業中のコードがプロジェクト全体に影響を及ぼすリスクを低減できます。「mainは常に動く」という安心感を確保できます。  
* **並行開発の実現**: 複数の開発者が、それぞれ別のブランチで同時に異なる作業を進めることが可能になります。これにより、チーム全体としての開発速度が向上します。  
* **実験的な実装の容易化**: 新しい技術やアイデアを試す際、専用のブランチを作成すれば、本流に影響を与えることなく自由に試行し、不要であれば容易に破棄できます。  
* **作業単位の明確化**: ブランチに「作業内容」が分かる名前（例: login-page-creation）をつけることで、各ブランチが担うタスクが明確になり、プロジェクト管理が容易になります。

### **2. 基本的なブランチ操作コマンド**

ブランチを扱うための基本的なコマンドシーケンスを以下に示します。

#### **2.1. ブランチの作成と一覧表示**

ローカルリポジトリに存在するブランチの一覧を表示し、新しいブランチを作成します。
```
# ローカルブランチの一覧を表示する。アスタリスク(*)は現在チェックアウトしているブランチを示す。  
git branch

# 新しいブランチを作成する。  
# 例: "login-page-task" という名前のブランチを作成  
git branch login-page-task

# 再度一覧を表示し、ブランチが作成されたことを確認する。  
git branch
```
#### **2.2. ブランチの切り替え**

作業対象のブランチを切り替えます。
```
# 指定したブランチに切り替える(チェックアウトする)。  
git switch login-page-task

# 現在のブランチが切り替わったことを確認する。  
git branch
```
*補足: 従来 git checkout コマンドがこの目的で使用されていましたが、近年のGitではブランチ操作に特化した git switch の使用が推奨されます。*

#### **2.3. ブランチの統合 (マージ)**

あるブランチで行った変更を、別のブランチに取り込みます。

**手順:**

1. 変更を取り込む側（例: main）のブランチに切り替える。  
2. git mergeコマンドを実行し、取り込みたいブランチを指定する。
```
# 1. mainブランチに切り替える。  
git switch main

# 2. login-page-taskブランチの変更内容を現在のブランチ(main)にマージする。  
git merge login-page-task
```
これにより、login-page-taskブランチでコミットされた変更履歴がmainブランチに統合されます。

#### **2.4. ブランチの削除**

マージが完了し、不要になったブランチを削除します。
```
# マージ済みのブランチを削除する。  
git branch -d login-page-task  
```
`-d`オプションは、マージ済みのブランチのみを削除するため安全です。マージされていないブランチを強制的に削除する場合は `-D` オプションを使用しますが、変更が失われる可能性があるため注意が必要です。

---

### 3. 演習

以下の手順に従い、ブランチの作成から削除までの一連の操作を実践してください。

1.  **リポジトリの準備**:  
    * 任意の場所に作業用ディレクトリを作成し、`git init` を実行してリポジトリを初期化する。  
    * `README.md`ファイルを作成し、内容を記述した後、最初のコミットを作成する。

2.  **プロフィール追加作業**:  
    * `add-profile-work`という名称でブランチを作成し、同ブランチに`switch`する。  
    * `profile.txt`というテキストファイルを新規作成し、任意の情報を記述して保存する。  
    * 変更をステージングし（`git add`）、「自己紹介の追加」などのコミットメッセージでコミットする。

3.  **マージ**:  
    * `main`ブランチに`switch`する。  
    * `add-profile-work`ブランチを`main`ブランチに`merge`する。  
    * ファイル一覧を表示し、`profile.txt`が`main`ブランチに存在することを確認する。

4.  **クリーンアップ**:  
    * `add-profile-work`ブランチを削除する。  
    * `git branch`コマンドを実行し、`main`ブランチのみが存在することを確認する。

---

### 4. まとめ

* ブランチは、プロジェクトの主軸から履歴を分岐させ、独立した作業を可能にする機能である。  
* 原則として、`main`ブランチで直接作業を行わず、目的別の作業ブランチを作成して開発を進める。  
* 基本操作である **`git branch`**, **`git switch`**, **`git merge`**, **`git branch -d`** の役割と使用法を習熟することが重要である。

ブランチを適切に活用することは、コードの品質と開発プロセスの安定性を維持するために不可欠なスキルです。  
