# **Gitコミットメッセージの書き方**

## **1. はじめに：なぜコミットメッセージが重要なのか？**

システム開発において、git commitは日々の業務で何度も実行する基本的な操作です。そして、その際に記述する**コミットメッセージ**は、単なる「変更のメモ」以上の重要な役割を担っています。

良いコミットメッセージは、以下のようなメリットをもたらします。

* **未来の自分を助ける**: 数週間後、数ヶ月後に自分の書いたコードを見返したとき、なぜこの変更を行ったのかを瞬時に理解できます。  
* **チーム開発を円滑にする**: 他のメンバーがあなたの変更内容を素早く理解し、レビューしやすくなります。コードを読む前にメッセージを読むだけで、変更の意図が伝わります。  
* **プロジェクトの品質を高める**: 変更履歴が「プロジェクトがどのように進化してきたかの物語」となり、バグの原因追跡や機能改善の際に非常に役立つドキュメントとなります。  
* **タスクの自動化**: 特定のフォーマットに従うことで、リリースノートの自動生成や、プロジェクト管理ツールとの連携が可能になります。

この資料では、誰が読んでも分かりやすく、かつ実践的なコミットメッセージの書き方について学んでいきましょう。

## **2. 良いコミットメッセージの構造**

一般的に、良いコミットメッセージは以下の3つのパートで構成されます。それぞれのパートの間は1行ずつ空けます。
```
件名（1行目）

本文（3行目以降）

フッター（本文の後）
```
1. **件名 (Subject)**: 変更内容の要約です。種類(影響範囲): 変更内容という形式で記述します。**最も重要な部分**です。  
2. **本文 (Body)**: なぜその変更が必要だったのか、具体的な背景や理由を記述します。（任意）  
3. **フッター (Footer)**: 関連するタスクの管理番号などを記述します。（任意）  
   ※チーム開発では、多くの場合「課題管理ツール（例: Redmine, Jira, GitHub Issues）」を使ってタスクを管理します。フッターには、このコミットがどのタスクに関連しているかを示す管理番号（例: Closes #123, Fixes #45）を記述することで、関連ツールと連携させることができます。

本文とフッターは必須ではありませんが、複雑な変更や、理由を明確にすべき変更の場合は記述することが強く推奨されます。**件名と本文の間には、必ず1行の空行を入れる**ことを忘れないでください。

## **3. Subject（件名）の書き方：5つのルール**

git log --onelineなどで一覧表示されるsubjectは、メッセージの顔です。以下のルールを守ることで、一貫性があり読みやすいsubjectになります。

### **ルール1： typeから始める**

コミットの種類を示すtypeを先頭に付けます。これにより、変更の種類が一目で分かります。代表的なtypeには以下のようなものがあります。

* **feat**: 新機能の追加 (feature)  
* **fix**: バグの修正 (bug fix)  
* **docs**: ドキュメントの変更・追加 (documentation)  
* **style**: コードのフォーマット変更（コードの動作に影響しないもの）  
* **refactor**: パフォーマンス改善や内部構造の整理など、バグ修正や機能追加ではないコードの変更  
* **test**: テストコードの追加・修正  
* **chore**: ビルドツールや設定ファイルの変更など、雑多なタスク

### **ルール2：現在形の命令形（動詞の原形）で書く**

"Added"（追加した）や "Adds"（追加する）のような過去形・三人称単数形ではなく、"Add"（追加する）という**命令形**で記述します。これにより、メッセージが簡潔で一貫性のあるスタイルになります。

* **良い例: feat: Add user login feature**  
* 悪い例: feat: Added user login feature  
* 悪い例: feat: Adds user login feature

### **ルール3：50文字以内で簡潔に書く**

subjectは要約です。GitHubなど多くのツールでは、50文字を超えると省略表示されることがあります。伝えたいことの核心を、簡潔にまとめましょう。

### **ルール4：文頭を大文字にする**

英文の場合、subjectの文頭はAのように大文字で始めます。

* **良い例: fix: Correct calculation logic for tax**  
* 悪い例: fix: correct calculation logic for tax

### **ルール5：文末にピリオドを付けない**

subjectはタイトルです。文末に.（ピリオド）は不要です。

* **良い例: docs: Update contribution guide**  
* 悪い例: docs: Update contribution guide.

## **4. Body（本文）の書き方：「何を」より「なぜ」を伝える**

subjectで「**何をしたか**」を伝えたら、bodyでは「**なぜ、その変更が必要だったのか**」という背景や文脈を説明します。

* **問題点**: この変更が解決しようとしている問題点は何か？  
* **解決策**: なぜこの解決策を選んだのか？他の方法と比較して、どのようなメリットがあるのか？  
* **影響範囲**: この変更によって影響を受ける他の機能はあるか？

bodyを書くことで、コードだけでは伝わらない開発者の意図が明確になり、将来のコード改修やレビューが格段にスムーズになります。

## **5. 良いコミットメッセージの例**

それでは、具体例を見てみましょう。

### **例1：シンプルなバグ修正**
```
fix(auth): Redirect to login page when session expires

ユーザーセッションが切れた後も、認証が必要なページに  
アクセスできてしまう問題があった。

サーバーからのレスポンスが401 Unauthorizedの場合、  
ログインページにリダイレクトする処理を追加して解決。
```
* **Subject**: fixタイプで、影響範囲(auth)を明記し、修正内容を命令形で簡潔に記述しています。  
* **Body**: 「どんな問題があったか」と「どのように解決したか」を明確に説明しています。

### **例2：新機能の追加**
```
feat: Add article search functionality

ブログ記事をキーワードで検索する機能を追加。

これまでは記事が増えるにつれて、目的の記事を見つけるのが困難だった。  
ヘッダーに検索ボックスを設置し、記事のタイトルと本文を対象に  
全文検索を実行できるようにした。

- サーバーサイドに検索APIエンドポイントを実装  
- フロントエンドに検索フォームと結果表示コンポーネントを追加
```
* **Subject**: featタイプで、何を追加したかが一目でわかります。  
* **Body**: なぜこの機能が必要だったか（課題）を述べ、具体的な実装内容をリストで分かりやすく示しています。

### **例3：リファクタリング**
```
refactor: Simplify user authentication logic

- Use async/await to improve readability  
- Remove redundant error handling

旧来の認証ロジックはPromiseチェーンが複雑にネストしており、  
可読性とメンテナンス性が低かった。

async/await構文を使用することで、非同期処理を同期処理のように  
記述できるようにし、コードの流れを分かりやすく改善。  
また、重複していたエラーハンドリング処理を共通化し、コード量を削減した。

この変更は外部のAPIには影響を与えません。
```
* **Subject**: refactorタイプで、何をしたかが明確です。箇条書きで変更点を要約しています。  
* **Body**: リファクタリング前の問題点と、今回の変更による改善点を具体的に説明しています。最後に、この変更が外部に影響を与えないことを明記しており、レビュワーに安心感を与えます。

## **6. まとめ：コミットメッセージ・チェックリスト**

コミットする前に、以下の項目を確認する習慣をつけましょう。

* [ ] subjectはtypeから始まっているか？ (feat, fix, docsなど)  
* [ ] subjectは命令形で書かれているか？ (例: Add, Fix, Change)  
* [ ] subjectは50文字以内で簡潔か？  
* [ ] subjectとbodyの間に空行が1行入っているか？  
* [ ] bodyには「なぜ」この変更が必要だったかが書かれているか？  
* [ ] bodyの各行は、読みやすいように72文字程度で改行されているか？

良いコミットメッセージは、あなたとチームにとっての貴重な財産になります。今日から早速、実践してみてください。